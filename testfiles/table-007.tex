\documentclass{article}
\usepackage[b5paper,margin=1cm]{geometry}
\pagestyle{empty}

\input{regression-test}

% avoid font size substitution messages from "LaTeX Font Info"
\usepackage{type1cm,type1ec}

\usepackage{array}
\usepackage{tabularray}
\usepackage{amsmath}

\SetTblrTracing{none}
%\UseTblrLibrary{varwidth}

\begin{document}

\START
\hrule\bigskip

\BEGINTEST{testing math mode}
A$\begin{array}{|l|p{2cm}|r|}
\hline
One   &  Two  & Three\dfrac{A}{B} \\
\hline
\end{array}$B
%% each cell will always be in math mode even when it's in a p-column
A$\begin{tblr}{|l|p{2cm}|r|}
\hline
One   &  Two  & Three\dfrac{A}{B} \\
\hline
\end{tblr}$B
\ENDTEST

\bigskip\hrule\bigskip

\BEGINTEST{testing mode option}
\begin{tblr}{Q[l]Q[r,mode=math]Q[r,mode=dmath]}
\hline
  Alpha   & \frac12 & \frac12 \\
  Epsilon & \frac34 & \frac34 \\
  Iota    & \frac56 & \frac56 \\
\hline
\end{tblr}
\quad
\begin{tblr}{Q[l]Q[r,$]Q[r,$$]}
\hline
  Alpha   & \frac12 & \frac12 \\
  Epsilon & \frac34 & \frac34 \\
  Iota    & \frac56 & \frac56 \\
\hline
\end{tblr}
\quad
$\begin{tblr}{Q[l,mode=text]Q[r]Q[r,mode=dmath]}
\hline
  Alpha   & \frac12 & \frac12 \\
  Epsilon & \frac34 & \frac34 \\
  Iota    & \frac56 & \frac56 \\
\hline
\end{tblr}$
\quad
$\begin{tblr}{Q[l,mode=text]Q[r,$]Q[r,$$]}
\hline
  Alpha   & \frac12 & \frac12 \\
  Epsilon & \frac34 & \frac34 \\
  Iota    & \frac56 & \frac56 \\
\hline
\end{tblr}$
\ENDTEST

\bigskip\hrule\bigskip

\BEGINTEST{testing mode=math with font=\boldmath}%#137
\begin{tblr}{
  hlines, vlines,
  column{1}={font=\bfseries},
  column{2}={font=\boldmath,mode=math},
}
  1    & n    \\
  text & y[n] \\
\end{tblr}
\ENDTEST

\end{document}
